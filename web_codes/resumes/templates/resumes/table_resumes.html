{% extends "recruit_manager/table_basic.html" %}
{% load static %}
{% block content %}

<div class="panel-group" id="accordion">
  <div class="panel-heading">
    <h4 class="panel-title">
      <a data-toggle="collapse" data-parent="#accordion"
         href="#collapseRequest">
      </a>
    </h4>
  </div>

  <div class="panel panel-success">
    <?-- tempPlate For a collapse -->
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title">
          <a data-toggle="collapse" data-parent="#accordion"
             href="#collapseCandidates">
            所有简历信息
          </a>
        </h4>
      </div>
      <div id="collapseCandidates" class="panel-collapse collapse">
        <div class="panel-body">

          <?--Logic for table show-->
          <div class="table-responsive">
            <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
              <thead>
                <tr>
                  <th>CK</th>
                  <th>CID</th>
                  <th>ID</th>
                  <th>*Name</th>
                  <th>Gender</th>
                  <th>Age</th>
                  <th>*Phone</th>
                  <th>*Email</th>
                  <th>*School</th>
                  <th>Degree</th>
                  <th>*Major</th>
                </tr>
              </thead>
            </table>
          </div>
          <?--End logic for table show-->

        </div>
      </div>
    </div>
    <?-- table filter -->
    <?-- Basic -->
  </div>
</div>

  <style type="text/css">
	.modal-content {
	}
  </style>
  <div class="modal fade " id="resumeSimplified" tabindex="-1" aria-labelled="resumeSimplified" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-body">
		  <div class=".container">

			<div class="row">
			  <div class="col-md-4 font-weight-bold mb-1">
				<h3>黄远银</h3>
			  </div>
			  <div class="col-md-8 font-weight-bold mb-1">
				<div class=".container">
				  <div class="row">
					<div class="col-md-12">
					  <h6> 18815013793 </h6>
					</div>
				  </div>
				  <div class="row">
					<div class="col-md-12">
					  <h6> honpey@gmail.com </h6>
					</div>
				  </div>
				</div>
			  </div>
			</div> <?-- row --->

            <div id="experience">
            </div>
            <div id="education">
            </div>
		  </div> <?-- container -->
        </div> <?-- modal-body -->

      </div>
    </div>
  </div>


{% endblock %}

{% block extra_js %}
<script>
$(document).ready(function() {
  $(function () { $('#collapseCandidates').collapse('show')});
  var selected = [];

  var table = $('#dataTable').DataTable({
    "processing": true,
    "serverSide": true,

    "ajax": {
      "url": "/api/resumes/",
      "type": "GET",
      },

    "rowCallback": function(row, data) {
      if ($.inArray(data.DT_RowId.toString(), selected) !== -1 ) {
        $(row).addClass('selected');
      }
    },

    "columns": [
      {"data": null,"checkboxes": {},},
      {"data": "candidate_id","visible": false},
      {
        "data": "id",
        render: function(data, type, row, meta) {
            return '<a class="nav-link" href={% url 'app_manager:t_resume' 1234 %}> 1234 </a>'.replace(/1234/g, row.id);
        }
      },
      {"data": "username"},
      {"data": "gender"},
      {"data": "age"},
      {"data": "phone_number"},
      {"data": "email"},
      {"data": "school"},
      {"data": "degree"},
      {"data": "major"},
    ],
  });

  $('#dataTable tbody').on('dblclick', 'tr', function() {
    var id = this.id
    $('#resumeSimplified').modal('toggle')
    console.log(id)
  });

  $('#dataTable tbody').on('click', 'tr', function() {
        /*
      var id = this.id;
      var index = $.inArray(id, selected);

      if ( index === -1 ) {
        selected.push(id);
      } else {
        selected.splice(index, 1);
      }

      $(this).toggleClass('selected');
      */
  });
});
</script>
{% endblock%}
